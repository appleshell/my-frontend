---
title: 泛型
---

说泛型之前，险了解几个 Typescript 中的操作符：`keyof`、`typeof`、`in`。

- keyof，键值获取

  获取一个类型的所有键值，返回一个联合类型：

  ```js
  type Person = {
    name: string
    age: number
  }
  type PersonKey = keyof Person   // PersonKey得到的类型为 'name' | 'age'
  ```

  keyof 的一个典型用途是限制访问对象的 key 合法化，any 做索引是不被接受的：

  ```js
  function getValue(obj: Person, k: any) {
    // return obj[k] // 通不过ts的检查
    return obj[k as keyof Person]
  }
  ```

- typeof 实例类型获取

  获取一个对象/实例的类型

  ```js
  const boy: Person = { name: "jack", age: 12 };
  type P = typeof boy; // P得到的类型是 {name: string, age: number}
  ```

  typeof 和 keyof 可以一起使用(typeof 返回的是一个类型)：

  ```js
  type PersonKey = keyof typeof boy   // 'name' | 'age'
  ```

- in 遍历属性

  in 只能用在类型的定义中，可以对枚举类型进行遍历：

  ```js
  // 这个类型将任何类型的键值转换为number类型
  type TypeToNumber<T> = {
    [key in keyof T]: number
  }
  ```

我对于泛型的理解是从官网上读到的一句话：**a type variable, a special kind of variable that works on types rather than values.**

参考：
[官方文档--泛型](https://www.typescriptlang.org/docs/handbook/generics.html)
[TypeScript 高级用法](https://juejin.cn/post/6926794697553739784)
